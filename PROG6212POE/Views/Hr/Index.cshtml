@model PROG6212POE.Models.ViewModels.HrViewModel
@{
    ViewData["Title"] = "HR Dashboard";
}

<h1 class="mb-3">HR Dashboard</h1>

<div class="d-flex justify-content-end mb-4">
    <a asp-action="CreateAdmin" class="btn btn-primary me-2">
        <i class="bi bi-person-plus-fill"></i> Create Admin
    </a>

    <a asp-action="CreateLecturer" class="btn btn-success">
        <i class="bi bi-person-fill-add"></i> Create Lecturer
    </a>
</div>

<hr />

<h2 class="mt-4">Lecturers</h2>

<table class="table table-bordered table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th>Name</th>
            <th>Username</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Hours Worked</th>
            <th>Hourly Rate</th>
            <th style="width:140px;">Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var lecturer in Model.Lecturers)
        {
            <tr>
                <td>
                    @(lecturer.User != null
                                    ? $"{lecturer.User.FirstName} {lecturer.User.LastName}"
                                    : "Unknown")
            </td>

                <td>@(lecturer.Username ?? "-")</td>
                <td>@(lecturer.Email ?? "-")</td>
                <td>@(lecturer.PhoneNumber ?? "-")</td>
                <td>@lecturer.HoursWorked.ToString("0.##")</td>
                <td>@lecturer.HourRate.ToString("C")</td>

                <td>
                    <a asp-action="EditLecturer"
                       asp-route-id="@lecturer.Id"
                       class="btn btn-success btn-sm me-1">
                        Edit
                    </a>

                    <form asp-action="Delete"
                          asp-route-id="@lecturer.Id"
                          method="post"
                          style="display:inline;">
                        <input type="hidden" name="type" value="Lecturer" />
                        <button class="btn btn-danger btn-sm"
                                onclick="return confirm('Delete this lecturer?');">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
                }
    </tbody>
</table>

<h2 class="mt-5">Admins</h2>

<table class="table table-bordered table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th>Name</th>
            <th>Username</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Role</th>
            <th style="width:140px;">Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var admin in Model.Admins)
        {
            <tr>
                <td>
                    @(admin.User != null
                                    ? $"{admin.User.FirstName} {admin.User.LastName}"
                                    : "Unknown")
            </td>

                <td>@(admin.Username ?? "-")</td>
                <td>@(admin.Email ?? "-")</td>
                <td>@(admin.PhoneNumber ?? "-")</td>
                <td>@admin.Role</td>

                <td>
                    <a asp-action="EditAdmin"
                       asp-route-id="@admin.Id"
                       class="btn btn-success btn-sm me-1">
                        Edit
                    </a>

                    <form asp-action="Delete"
                          asp-route-id="@admin.Id"
                          method="post"
                          style="display:inline;">
                        <input type="hidden" name="type" value="Admin" />
                        <button class="btn btn-danger btn-sm"
                                onclick="return confirm('Delete this admin?');">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
                }
    </tbody>
</table>
